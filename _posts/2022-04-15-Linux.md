# Linux

![image](https://cdn.nlark.com/yuque/0/2021/jpeg/450565/1618455861307-31f350fc-c2e5-42f6-9b06-4dcc211ab168.jpeg)

**Linux** 是一种[自由和开放源码](https://zh.wikipedia.org/wiki/自由及开放源代码软件)的[类UNIX](https://zh.wikipedia.org/wiki/类Unix系统)[操作系统](https://zh.wikipedia.org/wiki/作業系統)。该操作系统的[内核](https://zh.wikipedia.org/wiki/内核)由[林纳斯·托瓦兹](https://zh.wikipedia.org/wiki/林纳斯·托瓦兹)在1991年10月5日首次发布，在加上[用户空间](https://zh.wikipedia.org/wiki/使用者空間)的[应用程序](https://zh.wikipedia.org/wiki/應用程式)之后，成为Linux操作系统。Linux也是[自由软件](https://zh.wikipedia.org/wiki/自由软件)和[开放源代码软件](https://zh.wikipedia.org/wiki/开放源代码软件)发展中最著名的例子。只要遵循[GNU 通用公共许可证](https://zh.wikipedia.org/wiki/GNU通用公共许可证)（GPL），任何个人和机构都可以自由地使用Linux的所有底层[源代码](https://zh.wikipedia.org/wiki/源代码)，也可以自由地修改和再发布。大多数Linux系统还包括像提供[GUI](https://zh.wikipedia.org/wiki/GUI)的[X Window](https://zh.wikipedia.org/wiki/X_Window)之类的程序。除了一部分专家之外，大多数人都是直接使用[Linux 发行版](https://zh.wikipedia.org/wiki/Linux發行版)，而不是自己选择每一样组件或自行设置。

**Linux**严格来说是单指操作系统的内核，因操作系统中包含了许多[用户图形接口](https://zh.wikipedia.org/wiki/GUI)和其他实用工具。如今Linux常用来指基于Linux的完整操作系统，内核则改以[Linux内核](https://zh.wikipedia.org/wiki/Linux内核)称之。由于这些支持用户空间的系统工具和库主要由[理查德·斯托曼](https://zh.wikipedia.org/wiki/理查德·斯托曼)于1983年发起的[GNU计划](https://zh.wikipedia.org/wiki/GNU計劃)提供，[自由软件基金会](https://zh.wikipedia.org/wiki/自由软件基金会)提议将其组合系统命名为**GNU/Linux**，但Linux不属于[GNU计划](https://zh.wikipedia.org/wiki/GNU計劃)，这个名称并没有得到社区的一致认同。

Linux最初是作为支持[英特尔](https://zh.wikipedia.org/wiki/英特尔)[x86](https://zh.wikipedia.org/wiki/X86)架构的个人电脑的一个自由操作系统。目前Linux已经被移植到更多的计算机[硬件](https://zh.wikipedia.org/wiki/硬件)平台，远远超出其他任何操作系统。Linux可以运行在[服务器](https://zh.wikipedia.org/wiki/服务器)和其他大型平台之上，如[大型计算机](https://zh.wikipedia.org/wiki/大型计算机)和[超级计算机](https://zh.wikipedia.org/wiki/超级计算机)。世界上500个最快的超级计算机已100％运行Linux发行版或变种。Linux也广泛应用在[嵌入式系统](https://zh.wikipedia.org/wiki/嵌入式系统)上，如[手机](https://zh.wikipedia.org/wiki/手机)（Mobile Phone）、[平板电脑](https://zh.wikipedia.org/wiki/平板電腦)（Tablet）、[路由器](https://zh.wikipedia.org/wiki/路由器)（Router）、[电视](https://zh.wikipedia.org/wiki/电视)（TV）和[电子游戏机](https://zh.wikipedia.org/wiki/电子游戏机)等。在[移动设备](https://zh.wikipedia.org/wiki/移动设备)上广泛使用的[Android](https://zh.wikipedia.org/wiki/Android)操作系统就是创建在Linux内核之上。

通常情况下，Linux被打包成供个人计算机和服务器使用的Linux发行版，一些流行的主流Linux发布版，包括[Debian](https://zh.wikipedia.org/wiki/Debian)（及其派生版本[Ubuntu](https://zh.wikipedia.org/wiki/Ubuntu)、[Linux Mint](https://zh.wikipedia.org/wiki/Linux_Mint)）、[Fedora](https://zh.wikipedia.org/wiki/Fedora)（及其相关版本[Red Hat Enterprise Linux](https://zh.wikipedia.org/wiki/Red_Hat_Enterprise_Linux)、[CentOS](https://zh.wikipedia.org/wiki/CentOS)）和[openSUSE](https://zh.wikipedia.org/wiki/OpenSUSE)等。Linux发行版包含Linux内核和支撑内核的实用[程序](https://zh.wikipedia.org/wiki/计算机程序)和库，通常还带有大量可以满足各类需求的应用程序。个人计算机使用的Linux发行版通常包含[X Window](https://zh.wikipedia.org/wiki/X_Window)和一个相应的桌面环境，如[GNOME](https://zh.wikipedia.org/wiki/GNOME)或[KDE](https://zh.wikipedia.org/wiki/KDE)。桌面Linux操作系统常用的[应用程序](https://zh.wikipedia.org/wiki/应用程序)，包括[Firefox](https://zh.wikipedia.org/wiki/Firefox)网页浏览器、[LibreOffice](https://zh.wikipedia.org/wiki/LibreOffice)办公软件、[GIMP](https://zh.wikipedia.org/wiki/GIMP)图像处理工具等。由于Linux是自由软件，任何人都可以创建一个符合自己需求的Linux发行版。

### 1、什么是虚拟机（virtual machine）？

　　通过软件技术 模拟出来的一台虚拟的计算机，使用起来与真实的计算机类似。

### 2、虚拟机软件

　　虚拟机软件可以生成虚拟机，且可以同时运行多个不同的操作系统。举个例子：　　现有一个装有 Windows 系统的计算机，在上面安装了一个虚拟机软件（比如 VMware），VMware 里又装有 Linux、Mac OS等操作系统，则装有 Windows 系统被称为 宿主机，而 Linux、Mac OS 被称为 虚拟机。

### 3、Windows系统下 安装虚拟机 -- VMware

（1）Step1：下载虚拟机软件。　　

官网地址：https://www.vmware.com/products/workstation-pro/workstation-pro-evaluation.html

　　使用百度云盘下载亦可：　　　　

链接：https://pan.baidu.com/s/13qT3rTAVSUGKTuDRckNPVg　　　　提取码：w4p4

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455214205-5e5791ba-c4a2-49e7-b4c1-ec0963fa943e.jpg)

（2）Step2：下载相关系统的镜像文件。-- CentOS7　　阿里云镜像地址： https://mirrors.aliyun.com/centos/8.3.2011/isos/x86_64/

　　可以自行选择镜像：https://developer.aliyun.com/mirror/

### 4、VMware 14 安装 Linux 系统

（1）Step1：双击运行 VMware，输入密钥 或者 试用。

【密钥：】

   CG54H-D8D0H-H8DHY-C6X7X-N2KG6

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455214188-8cc5d2ce-65db-47f9-9bc2-0d2055bb3c97.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455214169-aef05676-c5ea-42bf-a54b-c89e1f3dc07a.jpg)

（2）Step2：创建新的虚拟机

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455214206-01236339-d837-4258-8649-0bca25958c58.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455214354-a1137984-5351-4063-8be5-34b636a16ad5.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455215015-f81c40ef-781d-4bbd-b722-de22d2fabd43.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455215099-1fd0745f-23d1-4ab8-ae90-44f197f294f9.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455215151-d2ebb6c8-2047-4f39-acc8-338dfb038ec4.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455215407-24110645-943d-4681-83c3-02d0d3671eaf.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455215619-c81a50cb-5287-4c6a-b083-6b479477f3ff.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455215755-24cde419-4ea5-4b44-84bb-01a0f8c6c10c.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455215965-7fc907e2-9e0b-4484-b093-ad0bc402e4a1.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455216139-1ad38d11-4cf3-4390-99ea-dacc30384a3e.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455216312-5bfc8647-7c42-4df6-85bb-a9895e6897ed.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455216494-16968ac1-e133-4619-bf2c-2f5f54052571.jpg)

（3）Step3：运行虚拟机，并安装、配置 CentOS7.

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455216665-5c5463d0-34ff-4844-8a9d-692726db63a8.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455216963-a098b216-2229-4f74-ae65-9b81393aebbd.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455217416-7cb6eef2-8676-4610-a8d6-53b6228f8fb8.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455217667-3317df2a-aee4-4640-bb88-6be7f413b45d.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455218306-df3e2f0a-0c1b-4d91-8ce9-7eab7f13e7b9.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455218317-73c91c14-9418-42cf-ba9d-b2bd5821e3d2.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455218825-6396ea38-ae83-46ff-810e-f08b3f65e804.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455219006-acadffe8-bff1-4856-a94f-98ab53e97402.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455219170-d624ae37-40a1-417f-b67e-f186e902d788.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455219341-9490eaf3-3fe6-4072-9f5c-0718cc63ae4a.jpg)

（4）Step4：重启后，接受协议，登录虚拟机。

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455219373-0e39d2bb-1d13-4273-8d77-a2f9d13d68a1.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455219668-6a898840-ae2f-4356-8dcc-685afd83c40b.jpg)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455219603-692ff53a-e740-497c-b229-de83185daf69.jpg)

###  

### Linux环境模拟：

http://cb.vu/

https://bellard.org/jslinux/

###  linux 为何物

Linux 就是一个操作系统，就像你多少已经了解的 Windows（xp，7，8）和 Mac OS 。至于操作系统是什么，就不用过多解释了，如果你学习过前面的入门课程，应该会有个基本概念了，这里简单介绍一下操作系统在整个计算机系统中的角色。

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455297583-c2b45d9e-b854-4ad9-b2be-7398a8a7a8e2.jpg)

我们的 Linux 主要是系统调用和内核那两层。当然直观地看，我们使用的操作系统还包含一些在其上运行的应用程序，比如文本编辑器、浏览器、电子邮件等。

###  linux历史简介

操作系统始于二十世纪五十年代，当时的操作系统能运行批处理程序。批处理程序不需要用户的交互，它从文件或者穿孔卡片读取数据，然后输出到另外一个文件或者打印机。

二十世纪六十年代初，交互式操作系统开始流行。它不仅仅可以交互，还能使多个用户从不同的终端同时操作主机。这样的操作系统被称作分时操作系统，它的出现对批处理操作系统是个极大的挑战。许多人尝试开发分时操作系统， 其中包括一些大学的研究项目和商业项目。当时有个项目叫做 Multics ，它的技术在当时很具有创新性。 Multics 项目的开发并不顺利，它花费了远超过预计的资金，却没有在操作系统市场上占到多少份额。而参加该项目的一个开发团体——贝尔实验室退出了这个项目。他们在退出后开发了他们自己的一个操作系统—— UNIX 。

UNIX 最初免费发布并因此在大学里受到欢迎。后来，UNIX 实现了 TCP/IP 协议栈，成为了早期工作站的操作系统的一个流行选择。

1990 年，UNIX 在服务器市场上尤其是大学校园中成为主流操作系统，许多校园都有 UNIX 主机，当然还包括一些研究它的计算机系的学生。这些学生都渴望能在自己的电脑上运行 UNIX 。不幸的是，从那时候开始，UNIX 开始变得商业化，它的价格也变得非常昂贵。而唯一低廉的选择就是 MINIX，这是一个功能有限的类似 UNIX 的操作系统，作者 Andrew Tanenbaum 开发它的目的是用于教学。

1991 年 10 月，Linus Torvalds（Linux 之父）在赫尔辛基大学接触 UNIX，他希望能在自己的电脑上运行一个类似的操作系统。可是 UNIX 的商业版本非常昂贵，于是他从 MINIX 开始入手，计划开发一个比 MINIX 性能更好的操作系统。很快他就开始了自己的开发工作。他第一次发行的版本迅速吸引了一些黑客。尽管最初的 Linux 并没有多少用处，但由于一些黑客的加入使它很快就具有了许多吸引人的特性，甚至一些对操作系统开发不感兴趣的人也开始关注它。

Linux 本身只是操作系统的内核。内核是使其它程序能够运行的基础。它实现了多任务和硬件管理，用户或者系统管理员交互运行的所有程序实际上都运行在内核之上。其中有些程序是必需的，比如说，命令行解释器（shell），它用于用户交互和编写 shell 脚本。 Linus 没有自己去开发这些应用程序，而是使用已有的自由软件。这减少了搭建开发环境所需花费的工作量。实际上，他经常改写内核，使得那些程序能够更容易地在 Linux 上运行。许多重要的软件，包括 C 编译器，都来自于自由软件基金 GNU 项目。GNU 项目开始于 1984 年，目的是为了开发一个完全类似于 UNIX 的免费操作系统。为了表扬 GNU 对 Linux 的贡献，许多人把 Linux 称为 GNU/Linux（GNU 有自己的内核）。

1992－1993 年，Linux 内核具备了挑战 UNIX 的所有本质特性，包括 TCP/IP 网络，图形界面系统（X window )，Linux 同样也吸引了许多行业的关注。一些小的公司开始开发和发行 Linux，有几十个 Linux 用户社区成立。1994 年，Linux 杂志也开始发行。

Linux 内核 1.0 在 1994 年 3 月发布，内核的发布要经历许多开发周期，直至达到一个稳定的版本。

下面列举一些 Linux 诞生大事件：

- 1965 年，Bell 实验室、MIT、GE（通用电气公司）准备开发 Multics 系统，为了同时支持 300 个终端访问主机，但是 1969 年失败了；那时候并没有鼠标、键盘，输入设备，只有卡片机。因此，如果要测试某个程序，则需要将读卡纸插入卡片机，如果有错误，还需要重新来过；Multics：Multiplexed Information and Computing Service；
- 1969 年，Ken Thompson（C 语言之父）利用汇编语言开发了 File Server System（Unics，即 UNIX 的原型）；因为汇编语言对于硬件的依赖性，因此只能针对特定硬件； 只是为了移植一款“太空旅游”的游戏；
- 1973 年，Dennis Ritchie 和 Ken Thompson 发明了 C 语言，而后写出了 UNIX 的内核；将 B 语言改成 C 语言，由此产生了 C 语言之父；90% 的代码是 C 语言写的，10% 的代码用汇编语言写的，因此移植时只要修改那 10% 的代码即可；
- 1977 年，Berkeley 大学的 Bill Joy 针对他的机器修改了 UNIX 源码，称为 BSD（Berkeley Software Distribution）；Bill Joy 是 Sun 公司的创始人；
- 1979 年，UNIX 发布 System V，用于个人计算机；
- 1984 年，因为 UNIX 规定“不能对学生提供源码”，Tanenbaum 老师自己编写兼容于 UNIX 的 Minix，用于教学；
- 1984 年，Stallman 开始 GNU（GNU's Not Unix）项目，创办 FSF（Free Software Foundation）基金会；产品：GCC、Emacs、Bash Shell、GLIBC；倡导“自由软件”；GNU 的软件缺乏一个开放的平台运行，只能在 UNIX 上运行；自由软件指用户可以对软件做任何修改，甚至再发行，但是始终要挂着 GPL 的版权；自由软件是可以卖的，但是不能只卖软件，而是卖服务、手册等；
- 1985 年，为了避免 GNU 开发的自由软件被其他人用作专利软件，因此创建 GPL（General Public License）版权声明；
- 1988 年，MIT 为了开发 GUI，成立了研发 XFree86 的组织；
- 1991 年，芬兰赫尔辛基大学的研究生 Linus Torvalds 基于 gcc、bash 开发了针对 386 机器的 Linux 内核；
- 1994 年，Torvalds 发布 Linux-v1.0；
- 1996 年，Torvalds 发布 Linux-v2.0，确定了 Linux 的吉祥物：企鹅。

UNIX 进化史（UNIX 大家族族谱 1969-2013）：

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455298848-31bac66b-173d-4b54-a4ac-80358ce22427.jpg)

###  linux与 Windows 到底有哪些不同

#### 1. 免费与收费

- 最新正版 Windows 10，需要付费购买；
- Linux 免费或少许费用。

#### 2. 软件与支持

- Windows 平台：数量和质量的优势，不过大部分为收费软件；由微软官方提供重要支持和服务；
- Linux 平台：大都为开源自由软件，用户可以修改定制和再发布，由于基本免费没有资金支持，部分软件质量和体验欠缺；由全球所有的 Linux 开发者和自由软件社区提供支持。

#### 3. 安全性

- Windows 平台：三天两头打补丁安装系统安全更新，还是会中病毒木马；
- Linux 平台：要说 Linux 没有安全问题，那当然是不可能的，这一点仁者见仁智者见智，相对来说肯定比 Windows 平台要更加安全，使用 Linux 你也不用装某杀毒、某毒霸。

#### 4. 使用习惯

- Windows：普通用户基本都是纯图形界面下操作使用，依靠鼠标和键盘完成一切操作，用户上手容易，入门简单；
- Linux：兼具图形界面操作（需要使用带有桌面环境的发行版）和完全的命令行操作，可以只用键盘完成一切操作，新手入门较困难，需要一些学习和指导（这正是我们要做的事情），一旦熟练之后效率极高。

#### 5. 可定制性

- Windows：这些年之前算是全封闭的，系统可定制性很差；
- Linux：你想怎么做就怎么做，Windows 能做到得它都能，Windows 做不到的，它也能。

#### 6. 应用范畴

或许你之前不知道 Linux ，要知道，你之前在 Windows 使用百度、谷歌，上淘宝，聊 QQ 时，支撑这些软件和服务的，是后台成千上万的 Linux 服务器主机，它们时时刻刻都在忙碌地进行着数据处理和运算，可以说世界上大部分软件和服务都是运行在 Linux 之上的。

#### 7. Windows 没有的

- 稳定的系统
- 安全性和漏洞的快速修补
- 多用户
- 用户和用户组的规划
- 相对较少的系统资源占用
- 可定制裁剪，移植到嵌入式平台（如安卓设备）
- 可选择的多种图形用户界面（如 GNOME，KDE）

#### 8. Linux 没有的

- 特定的支持厂商
- 足够的游戏娱乐支持度
- 足够的专业软件支持度

### 如何学习Linux

- 明确目的：你是要用 Linux 来干什么，搭建服务器、做程序开发、日常办公，还是娱乐游戏；
- 面对现实：Linux 大都在命令行下操作，能否接受不用或少用图形界面；
- 是学习 Linux 操作系统本身还是某一个 Linux 发行版（[Ubuntu](http://www.ubuntu.com/)，[CentOS](http://www.centos.org/)，[Fedora](http://fedoraproject.org/)，[OpenSUSE](http://www.opensuse.org/)，[Debian](http://www.debian.org/)，[Mint](http://linuxmint.com/) 等等），如果你对发行版的概念或者它们之间的关系不明确的话可以参看 [Linux 发行版](http://baike.baidu.com/view/897468.htm)。
- 注重基础，从头开始，可参考菜鸟教程

### Shell

通常在图形界面中对实际体验带来差异的不是上述的不同发行版的各种终端模拟器，而是这个 Shell（壳）。有壳就有核，这里的核就是指 UNIX/Linux 内核，Shell 是指“提供给使用者使用界面”的软件（命令解析器），类似于 DOS 下的 command（命令行）和后来的 cmd.exe 。



普通意义上的 Shell 就是可以接受用户输入命令的程序。它之所以被称作 Shell 是因为它隐藏了操作系统底层的细节。同样的 UNIX/Linux 下的图形用户界面 GNOME 和 KDE，有时也被叫做“虚拟 shell”或“图形 shell”。



UNIX/Linux 操作系统下的 Shell 既是用户交互的界面，也是**控制系统的脚本语言**。当然这一点也有别于 Windows 下的命令行，虽然该命令行也提供了很简单的控制语句。在 Windows 操作系统下，有些用户从来都不会直接使用 Shell，然而在 UNIX 系列操作系统下，Shell 仍然是控制系统启动、X11 启动和很多其它实用工具的脚本解释程序。

在 UNIX/Linux 中比较流行的常见的 Shell 有 bash、zsh、ksh、csh 等等，Ubuntu 终端默认使用的是 bash，默认的桌面环境是 GNOME 或者 Unity（基于 GNOME）

### 命令行操作体验

在 linux 中，最最重要的就是命令，这就包含了 2 个过程，输入和输出

- 输入：输入当然就是打开终端，然后按键盘输入，然后按回车，输入格式一般就是这类的

\#创建一个名为 file 的文件，touch是一个命令

touch file



\#进入一个目录，cd是一个命令

cd /etc/



\#查看当前所在目录

pwd

- 输出：输出会返回你想要的结果，比如你要看什么文件，就会返回文件的内容。如果只是执行，执行失败会告诉你哪里错了，如果执行成功那么会没有输出，因为 linux 的哲学就是：没有结果就是最好的结果

#### 开始

打开终端后系统会自动运行 Shell 程序，然后我们就可以输入命令让系统来执行了：

echo "hello world"

https://zhuanlan.zhihu.com/p/101478169

#### 1) 重要快捷键

真正学习命令行之前，你先要掌握几个十分有用、必需掌握的小技巧：

##### [Tab]

使用Tab键来进行命令补全，Tab键一般是在字母Q旁边，这个技巧给你带来的最大的好处就是当你忘记某个命令的全称时可以只输入它的开头的一部分，然后按下Tab键就可以得到提示或者帮助完成：

当然不止补全命令，补全目录、补全命令参数都是没问题的：

##### [Ctrl+c]

想想你有没有遇到过这种情况，当你在 Linux 命令行中无意输入了一个不知道的命令，或者错误地使用了一个命令，导致在终端里出现了你无法预料的情况，比如，屏幕上只有光标在闪烁却无法继续输入命令，或者不停地输出一大堆你不想要的结果。你想要立即停止并恢复到你可控的状态，那该怎么办呢？这时候你就可以使用Ctrl+c键来强行终止当前程序（你可以放心它并不会使终端退出）。

尝试输入以下命令：

tail

然后你会发现你接下来的输入都没有任何反应了，只是将你输入的东西显示出来，现在你可以使用Ctrl+c，来中断这个你目前可能还不知道是什么的程序（在后续课程中我们会具体解释这个tail命令是什么）。

又或者输入：

find /

显然这不是你想的结果，可以使用Ctrl+c结束。

虽然这个按着很方便，但不要随便按，因为有时候，当你看到终端没有任何反应或提示，也不能接受你的输入时，可能只是运行的程序需要你耐心等一下，就不要急着按Ctrl+c了。

##### 其他一些常用快捷键

**按键****作用**

#### 2) 学会利用历史输入命令

很简单，你可以使用键盘上的方向上键↑，恢复你之前输入过的命令，你一试便知。

#### 3) 学会使用通配符

通配符是一种特殊语句，主要有星号（*）和问号（?），用来对字符串进行模糊匹配（比如文件名、参数名）。当查找文件夹时，可以使用它来代替一个或多个真正字符；当不知道真正字符或者懒得输入完整名字时，常常使用通配符代替一个或多个真正字符。

终端里面输入的通配符是由 Shell 处理的，不是由所涉及的命令语句处理的，它只会出现在命令的“参数值”里（它不能出现在命令名称里， 命令不记得，那就用Tab补全）。当 Shell 在“参数值”中遇到了通配符时，Shell 会将其当作路径或文件名在磁盘上搜寻可能的匹配：若符合要求的匹配存在，则进行代换（路径扩展）；否则就将该通配符作为一个普通字符传递给“命令”，然后再由命令进行处理。总之，通配符实际上就是一种 Shell 实现的路径扩展功能。在通配符被处理后， Shell 会先完成该命令的重组，然后继续处理重组后的命令，直至执行该命令。

首先回到用户家目录：

cd /home/shiyanlou

然后使用 touch 命令创建 2 个文件，后缀都为 txt：

touch asd.txt fgh.txt

可以给文件随意命名，假如过了很长时间，你已经忘了这两个文件的文件名，现在你想在一大堆文件中找到这两个文件，就可以使用通配符：

ls *.txt

在创建文件的时候，如果需要一次性创建多个文件，比如：**“love_1_linux.txt，love_2_linux.txt，... love_10_linux.txt”**。在 Linux 中十分方便：

touch love_{1..10}_shiyanlou.txt

Shell 常用通配符：

**字符****含义**

#### 4) 学会在命令行中获取帮助

在 Linux 环境中，如果你遇到困难，可以使用man命令，它是Manual pages的缩写。

Manual pages 是 UNIX 或类 UNIX 操作系统中在线软件文档的一种普遍的形式， 内容包括计算机程序（包括库和系统调用）、正式的标准和惯例，甚至是抽象的概念。用户可以通过执行man命令调用手册页。

你可以使用如下方式来获得某个命令的说明和使用方式的详细介绍：

man <command_name>

比如你想查看 man 命令本身的使用方式，你可以输入：

man man

通常情况下，man 手册里面的内容都是英文的，这就要求你有一定的英文基础。man 手册的内容很多，涉及了 Linux 使用过程中的方方面面。为了便于查找，man 手册被进行了分册（分区段）处理，在 Research UNIX、BSD、OS X 和 Linux 中，手册通常被分为 8 个区段，安排如下：

**区段****说明**

要查看相应区段的内容，就在 man 后面加上相应区段的数字即可，如：

man 1 ls

会显示第一区段中的ls命令 man 页面。

所有的手册页遵循一个常见的布局，为了通过简单的 ASCII 文本展示而被优化，而这种情况下可能没有任何形式的高亮或字体控制。一般包括以下部分内容：

**NAME（名称）**

该命令或函数的名称，接着是一行简介。

**SYNOPSIS（概要）**

对于命令，正式的描述它如何运行，以及需要什么样的命令行参数。对于函数，介绍函数所需的参数，以及哪个头文件包含该函数的定义。

**DESCRIPTION（说明）**

命令或函数功能的文本描述。

**EXAMPLES（示例）**

常用的一些示例。

**SEE ALSO（参见）**

相关命令或函数的列表。

也可能存在其它部分内容，但这些部分没有得到跨手册页的标准化。常见的例子包括：OPTIONS（选项），EXIT STATUS（退出状态），ENVIRONMENT（环境），BUGS（程序漏洞），FILES（文件），AUTHOR（作者），REPORTING BUGS（已知漏洞），HISTORY（历史）和 COPYRIGHT（版权）。

通常 man 手册中的内容很多，你可能不太容易找到你想要的结果，不过幸运的是你可以在 man 中使用搜索/<你要搜索的关键字>，查找完毕后你可以使用n键切换到下一个关键字所在处，shift+n为上一个关键字所在处。使用Space（空格键）翻页，Enter（回车键）向下滚动一行，或者使用k，j（vim 编辑器的移动键）进行向前向后滚动一行。按下h键为显示使用帮助（因为 man 使用 less 作为阅读器，实为less工具的帮助），按下q退出。

想要获得更详细的帮助，你还可以使用info命令，不过通常使用man就足够了。如果你知道某个命令的作用，只是想快速查看一些它的某个具体参数的作用，那么你可以使用--help参数，大部分命令都会带有这个参数，如：

ls --help



### 命令行一些说明

1. '-'  单横杠一般为短命令行选项，一般单横岗后面跟一些简短的字母 如rm -f， mv -r , npm -D , npm -g，npm -h, npm -v
2. '--' 双横杠一般为长命令行选项，一般双横杠后面跟完整的单词。如 npm --help， npm --version, npm --save-dev, npm --global
3. 上面的npm命令，npm -h和npm --help、npm -v和npm --version 、 npm -D和 npm --save-dev 等命令是等价的，只是写法不同，npm --save-dev中‘save-dev’是一个完整的单词，中间的横杠不是选项
4. 命令行选项参数设置，如npm设置，npm install -g cnpm --registry=https://registry.npm.taobao.org和npm install -g cnpm --registry https://registry.npm.taobao.org , 这两个命令是等价的，--registry后面可以空格设置参数，也可用‘=’设置，两者效果一样，区别在终端是否识别
5. 短命令行的参数可以合并，如ls -al，rm -rf两个命令可以写成 ls -a -l 和 rm -r -f
6. 命令行区分大小写，不同的大小写会有不同的功能，如ps -a和ps -A，前一个显示同一终端下的所有程序，后一个显示所有进程，不在局限在同一终端
7. !! 表示执行上一条命令，如 执行 ls -al 后发现没有权限，可以 sudo !!
8. linux命令行大小学敏感，既要区分大写

### 常用终端命令

1. pwd：获取当前所在路径；
2. ls：列出当前目录下的所有文件；ls -al ：以长格式列出所有目录下文件（包括隐藏的文件）-a代表所有，-l长格式显示
3. cd： 进行目录之间的相互跳转；cd ~ ：返回家目录；cd - ：打开上一个 cd 过的目录；cd ../ : 返回上一层目录，cd - 和cd ../  这两个注意区别
4. mkdir、rmdir、mv [源地址]：创建、删除、移动文件夹，如果文件夹内不为空，则无法用rmdir删除文件夹；
5. rm -rf [源地址]：递归删除文件夹及文件夹内所有内容，无法挽回
6. cp -R [源地址] [目的地址]: 带参数-R是目录复制，不带是文件复制
7. history：查看之前执行过命令的历史记录，关闭终端后输入history将不会显示上个关闭终端的历史记录
8. ps：查看当前终端运行的程序；ps -A：显示所有进程
9. top：显示当前系统正在执行的进程的相关信息，包括进程ID、内存占用率、CPU占用率等，终端按q退出显示
10. kill [PID]：结束指定进程ID的进程，先使用top命令查看想要结束进程的PID，然后使用命令kill [PID结束进程
11. touch [文件名] ：创建文件
12. more [文件名] 或 cat [文件名]：查看文件内容
13. 管道符号 '>' 、'<' 、’< >'：将文件作为输入内容， > 左边的输出作为右边的输入，< 右边的输出作为左边的输入，如：node test.js > hello.txt，test.js的输出的内容会输入到hello.txt，打开hello.txt文件能看到test.js的输出内容；同理，node test.js < hello.txt中，运行test.js的输入内容是hello.txt的内容；node test.js < hello.txt > world.txt中，test.js使用hello.txt内容作为输出，运行完成后将test.js运行输出写入world.txt，(刚开始时理解成了hello.txt既向 test.js输入内容，也向world.txt输入内容，运行后才发现理解错了)，‘>’会将原有内容覆盖，‘>>’是内容追加，不覆盖
14. 管道符号 '|'： 如 node test.js | node test_1.js，将test.js 的输出作为test_1.js的输入；'|' 和 '>'比较像，但有区别，个人理解的区别是，> 一般作用于文件的输入输出，直接使用读取文件，而‘|’ 作用于程序运行的输入输出，读取文件内容需要通过命令如 cat hello.txt | node test_1.js 和 node test_1.js < hello.txt 一样的效果。
15. tail和head：列出文件的结尾和文件的开头；tail -n 5 hello.txt：显示hello.txt的最后五行内容；tail -n +5 hello.txt：显示hello.txt的从第五行开始到结束的内容，区别在显示的行数添加了一个“+”；tail -f [文件名]：若有程序持续向该文件写入内容，则可以实时查看该文件的内容；head -n 5 hello.txt：显示hello.txt的前五行内容；head -n -5 hello.txt：输出文件除了最后5行的全部内容，head和tail效果相反
16. grep: 强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来；grep -n hello hello_world.txt：从hello_world.txt中找出hello位置的数据，并在前面加上行号；cat hello_world.txt | grep -n hello：和上面的效果一样，grep的输入内容使用了上面管道命令的输入cat hello_world.txt ；cat hello_world.txt | grep -n o* ：寻找hello_world.txt中包含“o”的行
17. ifconfig：列出本机所有的网络设备以及其上面的配置，主要使用ip地址和mac地址
18. which：查看可执行文件的位置，在PATH变量指定的路径中，搜索某个系统命令的位置，并且返回第一个搜索结果；which cd：/usr/bin/cd ； which pwd ：bin/pwd
19. find pathname -options [-print -exec -ok ...]：用于在文件树种查找文件；如 find . -name "*.txt"：查找当前目录下一 .txt结尾的文件
20. man 命令：查看命令是的使用，如man cd、man rm等

### 常用网络命令

1. curl和wget：利用URL规则在命令行下工作的文件传输工具，；如：curl -o mybaidu.html http://www.baidu.com 和wget -O mybaidu.html http://www.baidu.com：会将内容下载到本地baidu.html（mac 需要下载wget命令）；根据命令行不同选项有强大的功能，具体可以参考：https://www.cnblogs.com/Downtime/p/8068097.html；curl和wget基础功能有诸多重叠，curl由于可自定义各种请求参数所以在模拟web请求方面更擅长；wget由于支持ftp和Recursive所以在下载文件方面更擅长
2. ping：通常用来测试与目标主机的连通性；如ping -c 10 -i 5 [www.baidu.com](https://www.baidu.com)：“-c”要发送数据包数目，“-i”数据包建个发送多少秒，每5秒向百度发送一个数据包，总共发送10次，
3. telnet ：通常用来远程登录；telnet [www.baidu.com](https://www.baidu.com)：尝试登陆百度主机，如果能连上需要输入账号和密码
4. route：用于显示和操作IP路由表，也提供了路由增加、修改、删除等操作；route -n：显示当前路由信息（mac中route命令不起作用，可以使用netstat -nr查看）；
5. netstat：用于显示与IP、TCP、UDP和ICMP协议相关的统计数据，一般用于检验本机各端口的网络连接情况；netstat -a：列出所有的端口；netstat -nr：显示路由信息
6. traceroute：可以知道信息从你的计算机到互联网另一端的主机是走的什么路径；如 traceroute [www.baidu.com](https://www.baidu.com)：能在信息界面看到路由是如何跳转的

### Linux 目录结构

 Linux 的目录与 Windows 的目录是有区别的，或许对于一般操作上的感受来说没有多大不同，但从它们的实现机制来说是完全不同的。

一种不同是体现在目录与存储介质（磁盘，内存，DVD 等）的关系上，以往的 Windows 一直是以存储介质为主的，主要以盘符（C 盘，D 盘...）及分区来实现文件管理，然后之下才是目录，目录就显得不是那么重要，除系统文件之外的用户文件放在任何地方任何目录也是没有多大关系。所以通常 Windows 在使用一段时间后，磁盘上面的文件目录会显得杂乱无章（少数善于整理的用户除外吧）。然而 UNIX/Linux 恰好相反，UNIX 是以目录为主的，Linux 也继承了这一优良特性。



 Linux 是以树形目录结构的形式来构建整个系统的，可以理解为树形目录是一个用户可操作系统的骨架。虽然本质上无论是目录结构还是操作系统内核都是存储在磁盘上的，但从逻辑上来说 Linux 的磁盘是“挂在”（挂载在）目录上的，每一个目录不仅能使用本地磁盘分区的文件系统，也可以使用网络上的文件系统。举例来说，可以利用网络文件系统（Network File System，NFS）服务器载入某特定目录等。

#### Linux系统各个目录的一些作用

**文件系统的类型**

LINUX有四种基本文件系统类型：普通文件、目录文件、链接文件和特殊文件，可用file命令来识别.

1) 普通文件：

如文本文件、C语言元代码、SHELL脚本、二进制的可执行文件等，可用cat、less、more、vi、emacs来察看内容，用mv来改名。

2) 目录文件：

包括文件名、子目录名及其指针。它是LINUX储存文件名的唯一地方，可用ls列出目录文件。

3) 链接文件：

是指向同一索引节点的那些目录条目。用ls来查看是，连接文件的标志用l开头，而文件面后以"->"指向所连接的文件。

4) 特殊文件：

LINUX的一些设备如磁盘、终端、打印机等都在文件系统中表示出来，则一类文件就是特殊文件，常放在/dev目录内。例如，软驱A称为/dev/fd0。LINUX无C：的概念，而是用/dev/had来自第一硬盘。

对于linux新手来说，最感到迷惑的问题之一就是文件都存在哪里呢?特别是对于那些从windows转过来的新手来说，linux的目录结构看起来有些奇怪哦。所以，在这里讲一下linux下的主要目录以及它们都是用来干什么的。

**系统目录简介**

1) /

这就是根目录。对你的电脑来说，有且只有一个根目录。所有的东西，我是说所有的东西都是从这里开始。举个例子：当你在终端里输入“/home”，你其实是在告诉电脑，先从/(根目录)开始，再进入到home目录。



2) /root

这是系统管理员(root user)的目录。对于系统来说，系统管理员就好比是上帝，它能对系统做任何事情，甚至包括删除你的文件。因此，请小心使用root帐号。

3) /bin

这里存放了标准的(或者说是缺省的)linux的工具，比如像“ls”、“vi”还有“more”等等。通常来说，这个目录已经包含在你的“path”系 统变量里面了。什么意思呢?就是：当你在终端里输入ls，系统就会去/bin目录下面查找是不是有ls这个程序。



4) /etc

这里主要存放了系统配置方面的文件。举个例子：你安装了samba这个套件，当你想要修改samba配置文件的时候，你会发现它们(配置文件)就在/etc/samba目录下。



5) /dev

这里主要存放与设备(包括外设)有关的文件(unix和linux系统均把设备当成文件)。想连线打印机吗?系统就是从这个目录开始工作的。另外还有一些包括磁盘驱动、USB驱动等都放在这个目录。



6) /home

这里主要存放你的个人数据。具体每个用户的设置文件，用户的桌面文件夹，还有用户的数据都放在这里。每个用户都有自己的用户目录，位置为：/home/用户名。当然，root用户除外。



7) /tmp

这是临时目录。对于某些程序来说，有些文件被用了一次两次之后，就不会再被用到，像这样的文件就放在这里。有些linux系统会定期自动对这个目录进行清理，因此，千万不要把重要的数据放在这里。





8) /usr

在这个目录下，你可以找到那些不适合放在/bin或/etc目录下的额外的工具。比如像游戏阿，一些打印工具拉等等。/usr目录包含了许多子目录： /usr/bin目录用于存放程序;/usr/share用于存放一些共享的数据，比如音乐文件或者图标等等;/usr/lib目录用于存放那些不能直接 运行的，但却是许多程序运行所必需的一些函数库文件。你的软件包管理器(应该是“新立得”吧)会自动帮你管理好/usr目录的。



9) /opt

这里主要存放那些可选的程序。你想尝试最新的firefox测试版吗?那就装到/opt目录下吧，这样，当你尝试完，想删掉firefox的时候，你就可 以直接删除它，而不影响系统其他任何设置。安装到/opt目录下的程序，它所有的数据、库文件等等都是放在同个目录下面。

举个例子：刚才装的测试版firefox，就可以装到/opt/firefox_beta目录下，/opt/firefox_beta目录下面就包含了运 行firefox所需要的所有文件、库、数据等等。要删除firefox的时候，你只需删除/opt/firefox_beta目录即可，非常简单。

10) /usr/local

这里主要存放那些手动安装的软件，即不是通过“新立得”或apt-get安装的软件。它和/usr目录具有相类似的目录结构。让软件包管理器来管理/usr目录，而把自定义的脚本(scripts)放到/usr/local目录下面，我想这应该是个不错的主意。



11) /media

有些linux的发行版使用这个目录来挂载那些usb接口的移动硬盘(包括U盘)、CD/DVD驱动器等等。



### 目录路径

#### 路径

有人可能不明白这路径是指什么，有什么用。顾名思义，路径就是你要去哪儿的路线嘛。如果你想进入某个具体的目录或者想获得某个目录的文件（目录本身也是文件）那就得用路径来找到了。

使用 cd 命令可以切换目录，在 Linux 里面使用 . 表示当前目录，.. 表示上一级目录（**注意，我们上一节介绍过的，以** **.** **开头的文件都是隐藏文件，所以这两个目录必然也是隐藏的，你可以使用** **ls -a** **命令查看隐藏文件**），- 表示上一次所在目录，～ 通常表示当前用户的 home 目录。使用 pwd 命令可以获取当前所在路径（绝对路径）。

进入上一级目录：

cd ..

进入你的 home 目录：

cd ~

\# 或者 cd /home/<你的用户名>

使用 pwd 获取当前路径：

pwd

#### 绝对路径

关于绝对路径，简单地说就是以根" / "目录为起点的完整路径，以你所要到的目录为终点，表现形式如： /usr/local/bin，表示根目录下的 usr 目录中的 local 目录中的 bin 目录。

#### 相对路径

相对路径，也就是相对于你当前的目录的路径，相对路径是以当前目录 . 为起点，以你所要到的目录为终点，表现形式如： usr/local/bin （这里假设你当前目录为根目录）。你可能注意到，我们表示相对路径实际并没有加上表示当前目录的那个 . ，而是直接以目录名开头，因为这个 usr 目录为 / 目录下的子目录，是可以省略这个 . 的（以后会讲到一个类似不能省略的情况）；如果是当前目录的上一级目录，则需要使用 .. ，比如你当前目录为 /home/shiyanlou 目录下，根目录就应该表示为 ../../ ，表示上一级目录（ home 目录）的上一级目录（ / 目录）。

下面我们以你的 home 目录为起点，分别以绝对路径和相对路径的方式进入 /usr/local/bin 目录：

\# 绝对路径

cd /usr/local/bin

\# 相对路径

cd ../../usr/local/bin

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455601019-08609119-4211-41db-a859-60a3f560603c.jpg)

进入一个目录，可以使用绝对路径也可以使用相对路径，那我们应该在什么时候选择正确的方式进入某个目录呢。就是凭直觉嘛，你觉得怎样方便就使用哪一个，而不用特意只使用某一种。比如假设我当前在 /usr/local/bin 目录，我想进入上一级的 local 目录你说是使用 cd .. 方便还是 cd /usr/local 方便？而如果要进入的是 usr 目录，那么 cd /usr ，就比 cd ../.. 方便一点了。

**提示：在进行目录切换的过程中请多使用** **Tab** **键自动补全，可避免输入错误，连续按两次** **Tab** **可以显示全部候选结果。**

#### 新建空白文件

使用 touch 命令创建空白文件，关于 touch 命令，其主要作用是来更改已有文件的时间戳的（比如，最近访问时间，最近修改时间），但其在不加任何参数的情况下，只指定一个文件名，则可以创建一个指定文件名的空白文件（不会覆盖已有同名文件），当然你也可以同时指定该文件的时间戳，更多关于 touch 命令的用法，会在下一讲文件搜索中涉及。

创建名为 test 的空白文件，因为在其它目录没有权限，所以需要先 cd ~ 切换回 shiyanlou 用户的 Home 目录：

cd ~

touch test

#### 新建目录

使用 mkdir（make directories）命令可以创建一个空目录，也可同时指定创建目录的权限属性。

创建名为“ mydir ”的空目录：

mkdir mydir

使用 -p 参数，同时创建父目录（如果不存在该父目录），如下我们同时创建一个多级目录（这在安装软件、配置安装路径时非常有用）：

mkdir -p father/son/grandson

这里使用的路径是相对路径，代表在当前目录下生成，当然我们直接以绝对路径的方式表示也是可以的。

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455601046-f909b85f-2774-422d-ad28-771d723e1186.jpg)

还有一点需要注意的是，若当前目录已经创建了一个 test 文件，再使用 mkdir test 新建同名的文件夹，系统会报错文件已存在。这符合 Linux 一切皆文件的理念。

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455601046-146e3315-f551-48f6-b3e7-892b53823ceb.jpg)

若当前目录存在一个 test 文件夹，则 touch 命令，则会更改该文件夹的时间戳而不是新建文件。

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455601031-78e42cc8-3716-4e6f-b791-e7153cd6de05.jpg)

#### 复制文件

使用 cp 命令（copy）复制一个文件到指定目录。

将之前创建的 test 文件复制到 /home/shiyanlou/father/son/grandson 目录中：

cp test father/son/grandson

是不是很方便啊，如果在图形界面则需要先在源目录复制文件，再进到目的目录粘贴文件，而命令行操作步骤就一步到位了嘛。

#### 复制目录

如果直接使用 cp 命令复制一个目录的话，会出现如下错误：

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455601080-c622f4ba-a00d-4bf2-8ea3-aa41a4be5592.jpg)

要成功复制目录需要加上 -r 或者 -R 参数，表示递归复制，就是说有点“株连九族”的意思：

cd /home/shiyanlou

mkdir family

cp -r father family

### 删除

#### 删除文件

使用 rm（remove files or directories）命令删除一个文件：

rm test

有时候你会遇到想要删除一些为只读权限的文件，直接使用 rm 删除会显示一个提示，如下：

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455601571-11d87e7a-06a1-48f3-a2e4-2290f3734fd6.jpg)

你如果想忽略这提示，直接删除文件，可以使用 -f 参数强制删除：

rm -f test

#### 删除目录

跟复制目录一样，要删除一个目录，也需要加上 -r 或 -R 参数：

rm -r family

遇到权限不足删除不了的目录也可以和删除文件一样加上 -f 参数：

rm -rf family

#### 移动文件

使用 mv（move or rename files）命令移动文件（剪切）。命令格式是 mv 源目录文件 目的目录。

例如将文件“ file1 ”移动到 Documents 目录：

mkdir Documents

touch file1

mv file1 Documents

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455601822-dfcddf4b-39df-4f7d-b98f-750d5171f6b2.jpg)

#### 重命名文件

mv 命令除了能移动文件外，还能给文件重命名。命令格式为 mv 旧的文件名 新的文件名。

例如将文件“ file1 ”重命名为“ myfile ”：

mv file1 myfile

#### 批量重命名

要实现批量重命名，mv 命令就有点力不从心了，我们可以使用一个看起来更专业的命令 rename 来实现。不过它要用 perl 正则表达式来作为参数，关于正则表达式我们要在后面才会介绍到，这里只做演示，你只要记得这个 rename 命令可以批量重命名就好了，以后再重新学习也不会有任何问题，毕竟你已经掌握了一个更常用的 mv 命令。

rename 命令并不是内置命令，若提示无该命令可以使用 sudo apt-get install rename 命令自行安装。

cd /home/shiyanlou/



\# 使用通配符批量创建 5 个文件:

touch file{1..5}.txt



\# 批量将这 5 个后缀为 .txt 的文本文件重命名为以 .c 为后缀的文件:

rename 's/\.txt/\.c/' *.txt



\# 批量将这 5 个文件，文件名和后缀改为大写:

rename 'y/a-z/A-Z/' *.c

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455601871-3651fc9a-af04-44ee-96a3-441bc3035d18.jpg)

简单解释一下上面的命令，rename 是先使用第二个参数的通配符匹配所有后缀为 .txt 的文件，然后使用第一个参数提供的正则表达式将匹配的这些文件的 .txt 后缀替换为 .c，这一点在我们后面学习了 sed 命令后，相信你会更好地理解。

有的同学可能在输入时出现命令未闭合的状态，命令行会出现 quote> 开头的提示符。这是因为上述命令中的 ' 未输入完成，这时按下 ctrl+c 即可退出该模式。还有就是注意 ' 必须为英文符号（半角），若输入的是中文符号（全角）也会报错。

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455601930-4e858dca-6d50-4f00-8710-f9d3142ba147.jpg)

### 查看文件

#### 使用 cat，tac 和 nl 命令查看文件

前两个命令都是用来打印文件内容到标准输出（终端），其中 cat 为正序显示，tac 为倒序显示。

标准输入输出：当我们执行一个 shell 命令行时通常会自动打开三个标准文件，即标准输入文件（stdin），默认对应终端的键盘、标准输出文件（stdout）和标准错误输出文件（stderr），后两个文件都对应被重定向到终端的屏幕，以便我们能直接看到输出内容。进程将从标准输入文件中得到输入数据，将正常输出数据输出到标准输出文件，而将错误信息送到标准错误文件中。

比如我们要查看之前从 /etc 目录下拷贝来的 passwd 文件：

cd /home/shiyanlou

cp /etc/passwd passwd

cat passwd

可以加上 -n 参数显示行号：

cat -n passwd

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455602464-ae500ab0-f53d-4fcb-9b7e-07132a355f25.jpg)

nl 命令，添加行号并打印，这是个比 cat -n 更专业的行号打印命令。

这里简单列举它的常用的几个参数：

-b : 指定添加行号的方式，主要有两种：

   -b a:表示无论是否为空行，同样列出行号("cat -n"就是这种方式)

   -b t:只列出非空行的编号并列出（默认为这种方式）

-n : 设置行号的样式，主要有三种：

   -n ln:在行号字段最左端显示

   -n rn:在行号字段最右边显示，且不加 0

   -n rz:在行号字段最右边显示，且加 0

-w : 行号字段占用的位数(默认为 6 位)

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455602553-1d7c3d4c-a025-4136-870a-72cd98700e8c.jpg)

你会发现使用这几个命令，默认的终端窗口大小，一屏显示不完文本的内容，得用鼠标拖动滚动条或者滑动滚轮才能继续往下翻页，要是可以直接使用键盘操作翻页就好了，那么你就可以使用下面要介绍的命令。

#### 使用 more 和 less 命令分页查看文件

如果说上面的 cat 是用来快速查看一个文件的内容的，那么这个 more 和 less 就是天生用来"阅读"一个文件的内容的，比如说 man 手册内部就是使用的 less 来显示内容。其中 more 命令比较简单，只能向一个方向滚动，而 less 为基于 more 和 vi （一个强大的编辑器，我们有单独的课程来让你学习）开发，功能更强大。less 的使用基本和 more 一致，具体使用请查看 man 手册，这里只介绍 more 命令的使用。

使用 more 命令打开 passwd 文件：

more passwd

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455602661-6b2c8112-fb39-4067-b55a-cd5d69e704f8.jpg)

打开后默认只显示一屏内容，终端底部显示当前阅读的进度。可以使用 Enter 键向下滚动一行，使用 Space 键向下滚动一屏，按下 h 显示帮助，q 退出。

#### 使用 head 和 tail 命令查看文件

这两个命令，那些性子比较急的人应该会喜欢，因为它们一个是只查看文件的头几行（默认为 10 行，不足 10 行则显示全部）和尾几行。还是拿 passwd 文件举例，比如当我们想要查看最近新增加的用户，那么我们可以查看这个 /etc/passwd 文件，不过我们前面也看到了，这个文件里面一大堆乱糟糟的东西，看起来实在费神啊。因为系统新增加一个用户，会将用户的信息添加到 passwd 文件的最后，那么这时候我们就可以使用 tail 命令了：

tail /etc/passwd

甚至更直接的只看一行， 加上 -n 参数，后面紧跟行数：

tail -n 1 /etc/passwd

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455602695-38e51373-8f46-4700-9ebd-4c54b7a321f2.jpg)

关于 tail 命令，不得不提的还有它一个很牛的参数 -f，这个参数可以实现不停地读取某个文件的内容并显示。这可以让我们动态查看日志，达到实时监视的目的。不过我不会在这门基础课程中介绍它的更多细节，感兴趣的用户可以自己去了解。

#### 查看文件类型

我们可以使用 file 命令查看文件的类型：

file /bin/ls

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455602906-f3182f67-97cd-423f-897b-398d6218a325.jpg)

说明这是一个可执行文件，运行在 64 位平台，并使用了动态链接文件（共享库）。

与 Windows 不同的是，如果你新建了一个 shiyanlou.txt 文件，Windows 会自动把它识别为文本文件，而 file 命令会识别为一个空文件。这个前面我提到过，在 Linux 中文件的类型不是根据文件后缀来判断的。当你在文件里输入内容后才会显示文件类型。

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455603731-68b16f90-65aa-4485-b726-7431df25e379.jpg)

#### 编辑文件

在 Linux 下面编辑文件通常我们会直接使用专门的命令行编辑器比如（emacs，vim，nano），由于涉及 Linux 上的编辑器的内容比较多，且非常重要，故我们有一门单独的基础课专门介绍这中一个编辑器 vim 。

强烈建议正在学习这门 Linux 基础课的你先在这里暂停一下，去学习 [vim 编辑器](https://www.lanqiao.cn/courses/2)的使用（至少掌握基本的操作），然后再继续本课程后面的内容，因为后面的内容会假设你已经学会了 vim 编辑器的使用。

如果你想更加快速地入门，可以直接使用 Linux 内部的 vim 学习教程，输入如下命令即可开始：

vimtutor

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455603735-ee4424af-78fe-4764-9268-8468d18cb1df.jpg)

\#### 

## 挑战：寻找文件

#### 介绍

有一个非常重要的文件（sources.list）但是你忘了它在哪了，你依稀记得它在 /etc/ 目录下，现在要你把这个文件找出来，然后设置成自己（shiyanlou 用户）可以访问，但是其他用户并不能访问。

#### 目标

1. 找到 sources.list 文件
2. 把文件所有者改为自己
3. 把权限修改为仅仅只有自己可读可写

#### 提示

- find
- chmod
- chown
- sudo

参考答案

sudo find /etc -name sources.list
sudo chown shiyanlou /etc/apt/sources.list
sudo chmod 600 /etc/apt/sources.list

###  Linux 用户管理

Linux 是一个可以实现多用户登录的操作系统，比如“李雷”和“韩梅梅”都可以同时登录同一台主机，他们共享一些主机的资源，但他们也分别有自己的用户空间，用于存放各自的文件。但实际上他们的文件都是放在同一个物理磁盘上的甚至同一个逻辑分区或者目录里，但是由于 Linux 的 **用户管理** 和 **权限机制**，不同用户不可以轻易地查看、修改彼此的文件。

下面我们就来学习一下 Linux 下的账户管理的基础知识。

#### 查看用户

请打开终端，输入命令：

who am i



\# 或者



who mom likes

输出的第一列表示打开当前伪终端的用户的用户名（要查看当前登录用户的用户名，去掉空格直接使用 whoami 即可），第二列的 pts/0 中 pts 表示伪终端，所谓伪是相对于 /dev/tty 设备而言的

还有一点需要注意的是，在某些环境中 who am i 和 who mom likes 命令不会输出任何内容，这是因为当前使用的 SHELL 不是登录时的 SHELL，没有用户与 who 的 stdin 相关联，因此不会输出任何内容。例如我在本地的 Ubuntu 系统上输入这个命令就不会有提示。

who 命令其它常用参数

**参数****说明**

#### 创建用户

在 Linux 系统里， root 账户拥有整个系统至高无上的权限，比如新建和添加用户。

root 权限，系统权限的一种，与 SYSTEM 权限可以理解成一个概念，但高于 Administrator 权限，root 是 Linux 和 UNIX 系统中的超级管理员用户帐户，该帐户拥有整个系统至高无上的权力，所有对象他都可以操作，所以很多黑客在入侵系统的时候，都要把权限提升到 root 权限，这个操作等同于在 Windows 下就是将新建的非法帐户添加到 Administrators 用户组。更比如安卓操作系统中（基于 Linux 内核）获得 root 权限之后就意味着已经获得了手机的最高权限，这时候你可以对手机中的任何文件（包括系统文件）执行所有增、删、改、查的操作。

大部分 Linux 系统在安装时都会建议用户新建一个用户而不是直接使用 root 用户进行登录，当然也有直接使用 root 登录的例如 Kali（基于 Debian 的 Linux 发行版，集成大量工具软件，主要用于数字取证的操作系统）。一般我们登录系统时都是以普通账户的身份登录的，要创建用户需要 root 权限，这里就要用到 sudo 这个命令了。不过使用这个命令有两个大前提，一是你要知道当前登录用户的密码，二是当前用户必须在 sudo 用户组。

**需要注意 Linux 环境下输入密码是不会显示的。**

su <user> 可以切换到用户 user，执行时需要输入目标用户的密码，sudo <cmd> 可以以特权级别运行 cmd 命令，需要当前用户属于 sudo 组，且需要输入当前用户的密码。su - <user> 命令也是切换用户，但是同时用户的环境变量和工作目录也会跟着改变成目标用户所对应的。

现在我们新建一个叫 lilei 的用户：

sudo adduser lilei

环境目前设置为 root 用户执行 sudo 不需要输入密码，通常此处需要按照提示输入 root密码（**Linux 下密码输入是不显示任何内容的**），root用户密码可以通过 sudo passwd root 命令进行设置。然后是给 lilei 用户设置密码，后面的选项的一些内容你可以选择直接回车使用默认值。

这个命令不但可以添加用户到系统，同时也会默认为新用户在 /home 目录下创建一个工作目录：

ls /home

su root  //切换到root



sudo passwd lilei // 设置用户密码

现在你已经创建好一个用户，并且你可以使用你创建的用户登录了，使用如下命令切换登录用户：

su -l lilei



输入刚刚设置的 lilei 的密码，然后输入如下命令并查看输出：

who am i

whoami // 当前用户

pwd  

你发现了区别了吗？这就是上一小节我们讲到的 who am i 和 whoami 命令的区别。

退出当前用户跟退出终端一样，可以使用 exit 命令或者使用快捷键 Ctrl+D。

### 文件权限

文件权限就是文件的访问控制权限，即哪些用户和组群可以访问文件以及可以执行什么样的操作。

Unix/Linux 系统是一个典型的多用户系统，不同的用户处于不同的地位，对文件和目录有不同的访问权限。为了保护系统的安全性，Unix/Linux 系统除了对用户权限作了严格的界定外，还在用户身份认证、访问控制、传输安全、文件读写权限等方面作了周密的控制。

在 Unix/Linux 中的每一个文件或目录都包含有访问权限，这些访问权限决定了谁能访问和如何访问这些文件和目录。

#### 查看文件权限

我们之前已经很多次用到 ls 命令了，如你所见，我们用它来列出并显示当前目录下的文件，当然这是在不带任何参数的情况下，它能做的当然不止这么多，现在我们就要用它来查看文件权限。

使用较长格式列出文件：

ls -l

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455696548-07cd4ccd-a27d-434c-b05c-42e1e18307c9.jpg))

你可能除了知道最后面那一项是文件名之外，其它项就不太清楚了，那么到底是什么意思呢：

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455696666-212504cd-e477-48a8-aa23-bc8d05eb1f7f.jpg)

可能你还是不太明白，比如第一项文件类型和权限那一堆东西具体指什么，链接又是什么，何为最后修改时间，下面一一道来：

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455696582-5d4d7b32-2462-478d-b1f7-9a15f78e0fa9.jpg)

- 文件类型

关于文件类型，这里有一点你必需时刻牢记 **Linux 里面一切皆文件**，正因为这一点才有了设备文件（ /dev 目录下有各种设备文件，大都跟具体的硬件设备相关）这一说。 socket：网络套接字，具体是什么，感兴趣的用户可以去学习实验楼的后续相关课程。pipe 管道，这个东西很重要，我们以后将会讨论到，这里你先知道有它的存在即可。软链接文件：链接文件是分为两种的，另一种当然是“硬链接”（硬链接不常用，具体内容不作为本课程讨论重点，而软链接等同于 Windows 上的快捷方式，你记住这一点就够了）。

- 文件权限

读权限，表示你可以使用 cat <file name> 之类的命令来读取某个文件的内容；写权限，表示你可以编辑和修改某个文件的内容；

执行权限，通常指可以运行的二进制程序文件或者脚本文件，如同 Windows 上的 exe 后缀的文件，不过 Linux 上不是通过文件后缀名来区分文件的类型。你需要注意的一点是，**一个目录同时具有读权限和执行权限才可以打开并查看内部文件，而一个目录要有写权限才允许在其中创建其它文件**，这是因为目录文件实际保存着该目录里面的文件的列表等信息。

所有者权限，这一点相信你应该明白了，至于所属用户组权限，是指你所在的用户组中的所有其它用户对于该文件的权限，比如，你有一个 iPad，那么这个用户组权限就决定了你的兄弟姐妹有没有权限使用它破坏它和占有它。

- 链接数

链接到该文件所在的 inode 结点的文件名数目（关于这个概念涉及到 Linux 文件系统的相关概念知识，不在本课程的讨论范围，感兴趣的用户可以查看 [硬链接和软链接的联系与区别](https://www.ibm.com/developerworks/cn/linux/l-cn-hardandsymb-links/index.html#major2)）。

- 文件大小

以 inode 结点大小为单位来表示的文件大小，你可以给 ls 加上 -lh 参数来更直观的查看文件的大小。

明白了文件权限的一些概念，我们顺带补充一下关于 ls 命令的一些其它常用的用法：

- 显示除了 .（当前目录）和 ..（上一级目录）之外的所有文件，包括隐藏文件（Linux 下以 . 开头的文件为隐藏文件）。

ls -a

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455696573-ef65c612-fd8f-499c-bbf2-3c53cb9700dc.jpg))

当然，你可以同时使用 -a 和 -l 参数：

ls -al

查看某一个目录的完整属性，而不是显示目录里面的文件属性：

ls -dl <目录名>

- 显示所有文件大小，并以普通人类能看懂的方式呈现：

ls -asSh

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455696560-279e86d9-e5c6-4d46-8b8f-dd58e24a2ee3.jpg)

其中小 s 为显示文件大小，大 S 为按文件大小排序，若需要知道如何按其它方式排序，可以使用 man ls 命令查询。

#### 修改文件权限

如果你有一个自己的文件不想被其他用户读、写、执行，那么就需要对文件的权限做修改。文件的权限有两种表示方式：

- 方式一：二进制数字表示

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455697076-9f3b57a7-01aa-46ff-9146-2dd142050fc1.jpg)

每个文件有三组固定的权限，分别对应拥有者，所属用户组，其他用户，**记住这个顺序是固定的**。文件的读写执行对应字母 rwx，以二进制表示就是 111，用十进制表示就是 7，对进制转换不熟悉的同学可以看看 [进制转换](https://baike.baidu.com/item/进制转换/3117222)。例如我们刚刚新建的文件 iphone11 的权限是 rw-rw-rw-，换成对应的十进制表示就是 666，这就表示这个文件的拥有者，所属用户组和其他用户具有读写权限，不具有执行权限。

如果我要将文件 iphone11 的权限改为只有我自己可以用那么就可以用这个方法更改它的权限。

为了演示，我先在文件里加点内容：

echo "echo \"hello shiyanlou\"" > iphone11

然后修改权限：

chmod 600 iphone11

ls -alh iphone11

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455697096-86d1fb48-6793-4970-963d-8feb6ffa34dd.jpg)

切换到 lilei 用户，尝试写入和读取操作，可以看到 lilei 用户已经不能读写这个 iphone11 文件了：

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455697114-60a9195b-1db0-425d-8a99-bbde282f8d78.jpg)

- 方式二：加减赋值操作

要完成上述实验相同的效果，你可以：

chmod go-rw iphone11

![image](https://cdn.nlark.com/yuque/0/2021/png/450565/1618455697220-69e5b6aa-899e-4300-8ed8-c1c23b4be3e3.jpg)

g、o 还有 u 分别表示 group（用户组）、others（其他用户） 和 user（用户），+ 和 - 分别表示增加和去掉相应的权限。